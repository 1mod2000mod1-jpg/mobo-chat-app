<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฅูุดุงุก ุญุณุงุจ - ูููุน ููุจ ุงูุนุงููู</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="red-bg"></div>
    <div class="moving-lights">
        <div class="light red-light"></div>
        <div class="light red-light"></div>
        <div class="light red-light"></div>
    </div>

    <div class="auth-container">
        <div class="back-button">
            <button class="glow-button red-button" onclick="goHome()">๐ ุงูุฑุฆูุณูุฉ</button>
        </div>

        <div class="logo-container">
            <img src="https://i.top4top.io/p_3583q2vy21.jpg" alt="ุดุนุงุฑ ููุจ ุงูุนุงููู" class="logo-image">
            <div class="logo-text">ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ</div>
        </div>

        <div class="auth-form glass-card">
            <h3>๐ฏ ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ</h3>
            
            <div class="form-group">
                <input type="text" id="new-username" class="glow-input" placeholder="ุงุณู ุงููุณุชุฎุฏู (3-20 ุญุฑู)" maxlength="20">
                <div id="username-feedback" class="feedback"></div>
            </div>

            <div class="form-group">
                <input type="password" id="new-password" class="glow-input" placeholder="ูููุฉ ุงููุฑูุฑ (4 ุฃุญุฑู ุนูู ุงูุฃูู)" maxlength="50">
                <div id="password-feedback" class="feedback"></div>
            </div>

            <button class="glow-button red-button" onclick="createAccount()">ุฅูุดุงุก ุงูุญุณุงุจ</button>

            <div class="auth-links">
                <p>ูู ูุฏูู ุญุณุงุจ ุจุงููุนูุ <a href="login.html">ุณุฌู ุงูุฏุฎูู</a></p>
            </div>
        </div>

        <!-- ูุงูุฐุฉ ุจูุงูุงุช ุงูุญุณุงุจ (ูุฎููุฉ ูู ุงูุจุฏุงูุฉ) -->
        <div id="account-data-modal" class="modal" style="display: none;">
            <div class="modal-content glass-card">
                <h2>๐ ุชู ุฅูุดุงุก ุญุณุงุจู ุจูุฌุงุญ!</h2>
                <div class="account-data">
                    <div class="data-item">
                        <label>ุงุณู ุงููุณุชุฎุฏู:</label>
                        <span id="display-username"></span>
                    </div>
                    <div class="data-item">
                        <label>ููุฏ ุงูุฏุฎูู:</label>
                        <div class="code-container">
                            <span id="display-logincode" class="login-code"></span>
                            <button class="copy-btn" onclick="copyLoginCode()">๐ ูุณุฎ</button>
                        </div>
                    </div>
                </div>
                <div class="important-notice">
                    <h4>๐ก ููุงุญุธุฉ ูููุฉ:</h4>
                    <p>ุงุญุชูุธ ุจููุฏ ุงูุฏุฎูู ูู ููุงู ุขูู ูุฃูู ูุง ูููู ุงุณุชุนุงุฏุชู</p>
                </div>
                <button class="glow-button red-button" onclick="goToChat()">ุงูุฏุฎูู ุฅูู ุงูุฏุฑุฏุดุฉ</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        function goHome() {
            window.location.href = 'index.html';
        }

        function createAccount() {
            const username = document.getElementById('new-username').value.trim();
            const password = document.getElementById('new-password').value.trim();
            
            if (username && password) {
                socket.emit('create-account', { 
                    username: username, 
                    password: password 
                });
            } else {
                showAlert('ุงูุฑุฌุงุก ููุก ุฌููุน ุงูุญููู', 'error');
            }
        }

        function copyLoginCode() {
            const code = document.getElementById('display-logincode').textContent;
            navigator.clipboard.writeText(code).then(() => {
                showAlert('ุชู ูุณุฎ ููุฏ ุงูุฏุฎูู ุจูุฌุงุญ', 'success');
            });
        }

        function goToChat() {
            window.location.href = 'chat.html';
        }

        // ุงุณุชูุจุงู ุจูุงูุงุช ุงูุญุณุงุจ ุงูุฌุฏูุฏ
        socket.on('account-created', (data) => {
            document.getElementById('display-username').textContent = data.username;
            document.getElementById('display-logincode').textContent = data.loginCode;
            document.getElementById('account-data-modal').style.display = 'block';
        });

        socket.on('account-error', (message) => {
            showAlert(message, 'error');
        });

        // ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ุฃุซูุงุก ุงููุชุงุจุฉ
        document.getElementById('new-username').addEventListener('input', function() {
            const username = this.value.trim();
            const feedback = document.getElementById('username-feedback');
            
            if (username.length > 0) {
                if (username.length < 3) {
                    feedback.textContent = 'โ ุงูุงุณู ูุตูุฑ ุฌุฏุงู';
                    feedback.style.color = '#dc2626';
                } else if (username.length > 20) {
                    feedback.textContent = 'โ ุงูุงุณู ุทููู ุฌุฏุงู';
                    feedback.style.color = '#dc2626';
                } else {
                    feedback.textContent = 'โ ุงุณู ูุณุชุฎุฏู ุตุงูุญ';
                    feedback.style.color = '#10b981';
                }
            } else {
                feedback.textContent = '';
            }
        });

        document.getElementById('new-password').addEventListener('input', function() {
            const password = this.value;
            const feedback = document.getElementById('password-feedback');
            
            if (password.length > 0) {
                if (password.length < 4) {
                    feedback.textContent = 'โ ูููุฉ ุงููุฑูุฑ ูุตูุฑุฉ';
                    feedback.style.color = '#dc2626';
                } else {
                    feedback.textContent = 'โ ูููุฉ ูุฑูุฑ ุตุงูุญุฉ';
                    feedback.style.color = '#10b981';
                }
            } else {
                feedback.textContent = '';
            }
        });

        function showAlert(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    document.body.removeChild(alertDiv);
                }
            }, 5000);
        }
    </script>
</body>
</html>
