<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title id="site-title">موقع MOBO العالمي للدردشة © 2025</title>
    <meta name="description" content="أقوى منصة دردشة عربية آمنة ومتطورة - MOBO © 2025">
    <meta name="keywords" content="دردشة, شات, عربي, MOBO, موبو, الزعيم">
    <meta name="author" content="MOBO - الزعيم - المالك الأعلى">
    <meta name="robots" content="noindex, nofollow">
    
    <link rel="icon" type="image/x-icon" id="site-favicon" href="https://i.top4top.io/p_3583q2vy21.jpg">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body class="protected-content" oncopy="return checkCopyPermission()" oncut="return checkCopyPermission()">
    
    <!-- 🌟 الخلفيات المتحركة -->
    <div class="stars-bg" id="stars-bg"></div>
    <div class="animated-bugs" id="animated-bugs"></div>
    <div class="colorful-lights" id="colorful-lights"></div>
    <div class="red-vortex" id="red-vortex">
        <div class="vortex-circle"></div>
        <div class="vortex-circle"></div>
        <div class="vortex-circle"></div>
    </div>

    <!-- 🔐 شاشة تسجيل الدخول -->
    <div id="login-screen" class="screen active">
        <div class="login-container fade-in-up">
            
            <!-- الشعار -->
            <div class="site-logo">
                <div class="logo-glow"></div>
                <img src="https://i.top4top.io/p_3583q2vy21.jpg" 
                     alt="شعار MOBO" 
                     class="logo-image"
                     id="main-logo"
                     loading="lazy">
                <div class="logo-text" id="main-title">موقع MOBO العالمي</div>
                <p class="logo-subtitle">أقوى منصة دردشة عربية © 2025</p>
            </div>
            
            <div class="login-options">
                <!-- تسجيل الدخول -->
                <div class="glass-card">
                    <h3>🔐 تسجيل الدخول</h3>
                    <div class="input-group">
                        <input type="text" id="login-username" placeholder="اسم المستخدم" 
                               maxlength="20" class="modern-input" autocomplete="username" required>
                        <input type="password" id="login-password" placeholder="كلمة المرور" 
                               maxlength="100" class="modern-input" autocomplete="current-password" required>
                    </div>
                    <button class="modern-btn" onclick="login()">
                        <span class="btn-text">دخول إلى الدردشة 🚀</span>
                    </button>
                </div>
                
                <!-- إنشاء حساب -->
                <div class="glass-card">
                    <h3>🎯 إنشاء حساب جديد</h3>
                    <div class="input-group">
                        <input type="text" id="register-username" placeholder="اسم المستخدم (3-20 حرف)" 
                               maxlength="20" class="modern-input" autocomplete="username" required>
                        <input type="password" id="register-password" placeholder="كلمة المرور (6+ أحرف)" 
                               maxlength="100" class="modern-input" autocomplete="new-password" required>
                        <input type="text" id="register-displayname" placeholder="الاسم الذي سيظهر للجميع" 
                               maxlength="30" class="modern-input" required>
                        <select id="register-gender" class="modern-input" required>
                            <option value="male">👨 ذكر</option>
                            <option value="female">👩 أنثى</option>
                        </select>
                        <select id="register-emoji" class="modern-input">
                            <option value="👨">👨 رجل</option>
                            <option value="👩">👩 امرأة</option>
                            <option value="👑">👑 أمير</option>
                            <option value="👸">👸 أميرة</option>
                            <option value="🥷">🥷 نينجا</option>
                            <option value="🧙">🧙 ساحر</option>
                            <option value="🧛">🧛 مصاص دماء</option>
                            <option value="🧚">🧚 جنية</option>
                            <option value="🦸">🦸 بطل خارق</option>
                            <option value="🤴">🤴 أمير</option>
                            <option value="👨‍🚀">👨‍🚀 رائد فضاء</option>
                            <option value="👨‍🎤">👨‍🎤 مغني</option>
                        </select>
                    </div>
                    <button class="modern-btn" onclick="register()">
                        <span class="btn-text">إنشاء الحساب ✨</span>
                    </button>
                </div>
            </div>

            <!-- رسالة للمدير (للمحظورين) -->
            <div class="glass-card support-section" id="support-section" style="display: none;">
                <h4>📩 رسالة دعم فني للزعيم</h4>
                <p style="color: #fca5a5; margin-bottom: 1rem;">
                    إذا كنت محظوراً، يمكنك إرسال طلب إلغاء الحظر هنا
                </p>
                <textarea id="support-message" class="modern-input" 
                          placeholder="اكتب رسالتك واعتذارك هنا..." 
                          maxlength="500" rows="4"></textarea>
                <button class="modern-btn" onclick="sendSupportMessage()">
                    إرسال للزعيم 👑
                </button>
            </div>

            <!-- روابط التواصل الاجتماعي -->
            <div class="glass-card social-links" id="social-links-container">
                <h4>📱 تواصل معنا</h4>
                <div class="social-buttons" id="social-buttons"></div>
            </div>

            <!-- حقوق الطبع -->
            <div class="copyright-notice">
                <strong>© 2025 موقع MOBO العالمي للدردشة</strong><br>
                المطور والمالك الأعلى: الزعيم MOBO 👑<br>
                <span style="color: #dc2626; font-weight: 800;">
                    ⚠️ يمنع النسخ أو السرقة أو التقليد بتاتاً ⚠️
                </span><br>
                <small>انتهاك الحقوق سيتم ملاحقته قانونياً</small>
            </div>
        </div>
    </div>

    <!-- 💬 شاشة الدردشة -->
    <div id="chat-screen" class="screen">
        <div class="chat-container">
            
            <!-- الهيدر -->
            <header class="chat-header">
                <div class="header-left">
                    <div class="header-logo">
                        <img src="https://i.top4top.io/p_3583q2vy21.jpg" 
                             alt="MOBO" 
                             class="header-logo-image"
                             id="header-logo"
                             loading="lazy">
                        <div>
                            <h1 id="header-title">موقع MOBO العالمي</h1>
                            <div class="room-info" id="room-info">🌍 الغرفة العالمية الرسمية</div>
                        </div>
                    </div>
                    <div class="user-status">
                        <span class="current-user-avatar" id="current-user-avatar"></span>
                        <span id="current-user-name"></span>
                        <span id="user-badges"></span>
                    </div>
                </div>
                <div class="header-right">
                    <button class="modern-btn small" id="supreme-panel-btn" 
                            style="display: none;" onclick="showSupremePanel()">
                        👑 لوحة الزعيم
                    </button>
                    <button class="modern-btn small" onclick="toggleRoomsList()">
                        🏠 الغرف
                    </button>
                    <button class="modern-btn small" onclick="toggleUsersList()">
                        👥 المستخدمين
                    </button>
                    <button class="modern-btn small" onclick="showPrivateMessages()">
                        💬 الخاص
                    </button>
                    <button class="modern-btn small" onclick="logout()">
                        🚪 خروج
                    </button>
                </div>
            </header>
            
            <!-- المنطقة الرئيسية -->
            <div class="chat-main">
                
                <!-- قائمة الغرف -->
                <div id="rooms-sidebar" class="sidebar rooms-sidebar custom-scrollbar">
                    <div class="sidebar-header">
                        <h3>🏠 غرف الدردشة</h3>
                        <button class="modern-btn small" onclick="showCreateRoomModal()">
                            ➕ غرفة جديدة
                        </button>
                    </div>
                    <div id="rooms-list" class="rooms-list"></div>
                </div>

                <!-- قائمة المستخدمين -->
                <div id="users-sidebar" class="sidebar users-sidebar custom-scrollbar">
                    <div class="sidebar-header">
                        <h3>👥 المتصلين (<span id="users-count">0</span>)</h3>
                        <button class="modern-btn small" onclick="toggleUsersList()">✕</button>
                    </div>
                    <div id="users-list" class="users-list"></div>
                </div>
                
                <!-- منطقة الرسائل -->
                <div class="chat-content">
                    <div class="chat-messages custom-scrollbar" id="messages">
                        <div class="welcome-message glass-card">
                            <img src="https://i.top4top.io/p_3583q2vy21.jpg" 
                                 alt="مرحباً" class="welcome-logo" loading="lazy">
                            <h3>مرحباً بك في موقع MOBO العالمي! 👋</h3>
                            <p>© 2025 MOBO - أقوى منصة دردشة عربية</p>
                            <p style="margin-top: 1rem;">ابدأ بالدردشة مع المستخدمين</p>
                        </div>
                    </div>
                    
                    <!-- أدوات الإرسال -->
                    <div class="chat-tools">
                        <div class="tools-buttons">
                            <button class="tool-btn" onclick="showImageUpload()" title="رفع صورة">
                                🖼️
                            </button>
                            <button class="tool-btn" onclick="showEmojiPicker()" title="إيموجي">
                                😊
                            </button>
                            <input type="file" id="image-input" accept="image/*" 
                                   style="display: none;" onchange="handleImageUpload(this)">
                        </div>
                        <form id="message-form" class="message-form">
                            <textarea id="message-input" class="message-input" 
                                    placeholder="اكتب رسالتك هنا... (300 حرف كحد أقصى)" 
                                    maxlength="300" rows="1" disabled></textarea>
                            <button type="submit" class="modern-btn" disabled>
                                إرسال 🚀
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ═══════════════ النوافذ المنبثقة ═══════════════ -->

    <!-- نافذة إنشاء غرفة -->
    <div id="create-room-modal" class="modal">
        <div class="modal-content glass-card">
            <span class="modal-close" onclick="hideModal('create-room-modal')">&times;</span>
            <h2>🏠 إنشاء غرفة جديدة</h2>
            <div class="modal-body">
                <input type="text" id="room-name-input" class="modern-input" 
                       placeholder="اسم الغرفة" maxlength="50">
                <textarea id="room-desc-input" class="modern-input" 
                          placeholder="وصف الغرفة (اختياري)" maxlength="200" rows="3"></textarea>
                <input type="password" id="room-pass-input" class="modern-input" 
                       placeholder="كلمة سر الغرفة (اختياري)" maxlength="50">
                <button class="modern-btn" onclick="createRoom()">
                    إنشاء الغرفة ✨
                </button>
            </div>
        </div>
    </div>

    <!-- نافذة الرسائل الخاصة -->
    <div id="private-messages-modal" class="modal">
        <div class="modal-content glass-card large-modal">
            <span class="modal-close" onclick="hideModal('private-messages-modal')">&times;</span>
            <h2>💬 الرسائل الخاصة</h2>
            <div class="modal-body private-chat">
                <div class="private-users-list" id="private-users-list"></div>
                <div class="private-messages-area">
                    <div class="private-messages" id="private-messages"></div>
                    <div class="private-input-area">
                        <textarea id="private-message-input" class="modern-input" 
                                  placeholder="اكتب رسالتك..." maxlength="500" rows="2"></textarea>
                        <button class="modern-btn" onclick="sendPrivateMessage()">
                            إرسال 📩
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- نافذة لوحة الزعيم -->
    <div id="supreme-panel-modal" class="modal">
        <div class="modal-content glass-card supreme-modal">
            <span class="modal-close" onclick="hideModal('supreme-panel-modal')">&times;</span>
            <h2>👑 لوحة تحكم الزعيم MOBO</h2>
            <div class="modal-body">
                <div class="supreme-tabs">
                    <button class="tab-btn active" onclick="switchSupremeTab('muted')">
                        🔇 المكتومين
                    </button>
                    <button class="tab-btn" onclick="switchSupremeTab('banned')">
                        🚫 المحظورين
                    </button>
                    <button class="tab-btn" onclick="switchSupremeTab('support')">
                        📩 رسائل الدعم
                    </button>
                    <button class="tab-btn" onclick="switchSupremeTab('rooms')">
                        🏠 إدارة الغرف
                    </button>
                    <button class="tab-btn" onclick="switchSupremeTab('settings')">
                        ⚙️ إعدادات النظام
                    </button>
                </div>

                <div class="supreme-content">
                    <!-- قائمة المكتومين -->
                    <div id="supreme-muted" class="supreme-tab-content active">
                        <div class="supreme-actions">
                            <button class="modern-btn small" onclick="refreshMutedList()">
                                🔄 تحديث
                            </button>
                        </div>
                        <div id="muted-list" class="supreme-list"></div>
                    </div>

                    <!-- قائمة المحظورين -->
                    <div id="supreme-banned" class="supreme-tab-content">
                        <div class="supreme-actions">
                            <button class="modern-btn small" onclick="refreshBannedList()">
                                🔄 تحديث
                            </button>
                        </div>
                        <div id="banned-list" class="supreme-list"></div>
                    </div>

                    <!-- رسائل الدعم -->
                    <div id="supreme-support" class="supreme-tab-content">
                        <div class="supreme-actions">
                            <button class="modern-btn small" onclick="refreshSupportMessages()">
                                🔄 تحديث
                            </button>
                            <button class="modern-btn small" onclick="cleanAllSupportMessages()">
                                🧹 تنظيف الكل
                            </button>
                        </div>
                        <div id="support-messages-list" class="supreme-list"></div>
                    </div>

                    <!-- إدارة الغرف -->
                    <div id="supreme-rooms" class="supreme-tab-content">
                        <div id="rooms-management-list" class="supreme-list"></div>
                    </div>

                    <!-- إعدادات النظام -->
                    <div id="supreme-settings" class="supreme-tab-content">
                        <div class="settings-grid">
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="setting-copy" onchange="updateSystemSetting('allowCopy', this.checked)">
                                    السماح بالنسخ
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="setting-screenshot" onchange="updateSystemSetting('allowScreenshot', this.checked)">
                                    السماح بالسكرينشوت
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>لون الموقع:</label>
                                <select id="setting-color" class="modern-input" onchange="updateSystemSetting('siteColor', this.value)">
                                    <option value="red">🔴 أحمر</option>
                                    <option value="black">⚫ أسود</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label>شعار الموقع (URL):</label>
                                <input type="text" id="setting-logo" class="modern-input" placeholder="https://...">
                                <button class="modern-btn small" onclick="updateLogo()">تحديث</button>
                            </div>
                            <div class="setting-item">
                                <label>عنوان الموقع:</label>
                                <input type="text" id="setting-title" class="modern-input" placeholder="موقع MOBO">
                                <button class="modern-btn small" onclick="updateTitle()">تحديث</button>
                            </div>
                            <div class="setting-item">
                                <h4>روابط التواصل الاجتماعي</h4>
                                <input type="text" id="social-telegram" class="modern-input" placeholder="Telegram">
                                <input type="text" id="social-instagram" class="modern-input" placeholder="Instagram">
                                <input type="text" id="social-youtube" class="modern-input" placeholder="YouTube">
                                <input type="text" id="social-email" class="modern-input" placeholder="Email">
                                <button class="modern-btn small" onclick="updateSocialLinks()">
                                    حفظ الروابط
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- قائمة الإجراءات (عند الضغط على رسالة) -->
    <div id="message-actions-menu" class="actions-menu glass-card" style="display: none;">
        <div class="actions-menu-header">⚙️ الإجراءات</div>
        <div id="message-actions-list"></div>
    </div>

    <!-- 📜 السكريبتات -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>
